!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);const n=document.getElementById("drawing-canvas"),r=n.getContext("2d");let a=!1;function i(){return n.offsetWidth/n.width}let c=n;const l={};n.addEventListener("mousedown",e=>{c=r.getImageData(0,0,n.width,n.height),l.x=Math.floor(e.offsetX/i()),l.y=Math.floor(e.offsetY/i()),a=!0}),n.addEventListener("mouseup",()=>{a=!1});const s=document.getElementById("frames");function f(){document.querySelectorAll(".item-frame").forEach((e,t)=>{e.querySelector(".number-frame").innerText=t+1})}function d(){Array.from(s.children).forEach(e=>e.classList.remove("active-item")),document.querySelector(".active").classList.remove("active")}function u(e){const{target:t}=e;if("delete-frame"===t.id){if("item-frame active-item"===t.parentNode.parentNode.className){document.querySelector(".item-frame").classList.toggle("active-item");const e=document.querySelector(".canvas-frame");e.classList.toggle("active"),r.clearRect(0,0,n.width,n.height),r.drawImage(e,0,0)}t.parentNode.parentNode.remove(),f()}if("copy-frame"===t.id){const e=t.parentNode.parentNode.cloneNode(!0),o=t.parentNode.querySelector("canvas");e.querySelector("canvas").getContext("2d").drawImage(o,0,0),s.insertBefore(e,s.lastChild),t.parentNode.parentNode.classList.remove("active-item"),t.parentNode.children[0].classList.remove("active"),f()}"item-frame"===t.parentNode.className&&(d(),t.parentNode.classList.toggle("active-item"),t.parentNode.children[0].children[0].classList.toggle("active"),r.clearRect(0,0,n.width,n.height),r.drawImage(t.parentNode.children[0].children[0],0,0))}function m(e){if(!e.target.classList.contains("tile-overlay-move"))return;const t=e.target.parentNode;e.target.onmousedown=function(){t.style.position="absolute",t.style.zIndex=100,t.parentNode.classList.add("preview-container-active"),document.onmousemove=function(e){var o;o=e,t.style.top=`${o.pageY-t.offsetHeight/2-t.parentNode.offsetTop}px`,t.style.left="-3px"}},t.onmouseup=function(){document.querySelectorAll(".item-frame").forEach(e=>{const o=t.offsetTop+t.parentNode.offsetTop,n=e.offsetTop;if(o>n-45&&o<n+45){const o=e,n=e.firstElementChild,r=t.parentNode,a=t;t.style.top="0px",t.style.left="0px",o.appendChild(a),r.appendChild(n),r.classList.remove("preview-container-active")}else t.parentNode.appendChild(t),t.parentNode.classList.remove("preview-container-active")}),t.style.zIndex=1,document.onmousemove=null,t.onmouseup=null,f()}}document.getElementById("btn-add-frame").addEventListener("click",()=>{document.getElementsByClassName("item-frame").length;!function(){d();const e=s.querySelector(".item-frame").cloneNode(!0);e.classList.toggle("active-item"),e.children[0].children[0].classList.toggle("active"),s.appendChild(e),r.clearRect(0,0,n.width,n.height),f()}()});const h=document.getElementById("animation-frame"),v=document.getElementsByName("resize"),g=document.querySelector(".active-color"),p=document.querySelector(".prev-color"),y=document.querySelector(".swap-color");function E(){const e=document.querySelectorAll(".canvas-frame");let t;v.forEach(o=>{o.checked&&(t=o.value),n.width=t,n.height=t,h.width=t,h.height=t,e.forEach(e=>{e.width=t,e.height=t})})}function x(){let e;return document.getElementsByName("tool").forEach(t=>{t.checked&&(e=t.value)}),e}function M(){return g.value}function L(e){if("pen"===x()&&a&&a){r.fillStyle=M();const t=Math.floor(e.offsetX/i()),o=Math.floor(e.offsetY/i());r.fillRect(t,o,1,1)}}function w(e){if("mirror"!==x()||!a)return;r.fillStyle=M();const t=Math.floor(e.offsetX/i()),o=Math.abs(n.width-t-1),c=Math.floor(e.offsetY/i());r.fillRect(t,c,1,1),r.fillRect(o,c,1,1)}function S(e,t){return 4*(t*n.width+e)}function b(e,t,o){return e[t]===o.r&&e[t+1]===o.g&&e[t+2]===o.b&&e[t+3]===o.a}function I(e,t,o){e[t]=o.r||0,e[t+1]=o.g||0,e[t+2]=o.b||0,e[t+3]=Object.prototype.hasOwnProperty.call(o,"a")?o.a:255}function N(e){if("bucket"!==x())return;!function(e,t,o){const a=r.getImageData(0,0,n.width,n.height),i=a.data,c=S(e,t),l={r:i[c],g:i[c+1],b:i[c+2],a:i[c+3]},s=[[e,t]];for(;s.length;){const e=s.pop(),t=e[0];let r=e[1],a=S(t,r);for(;r-- >=0&&b(i,a,l);)a-=4*n.width;a+=4*n.width,r+=1;let c=!1,f=!1;for(;r++<n.height-1&&b(i,a,l);)I(i,a,o),t>0&&(b(i,a-4,l)?c||(s.push([t-1,r]),c=!0):c&&(c=!1)),t<n.width-1&&(b(i,a+4,l)?f||(s.push([t+1,r]),f=!0):f&&(f=!1)),a+=4*n.width}r.putImageData(a,0,0)}(Math.floor(e.offsetX/i()),Math.floor(e.offsetY/i()),function(e){const t=e.slice(1).match(/.{2}/g);return t[0]=parseInt(t[0],16),t[1]=parseInt(t[1],16),t[2]=parseInt(t[2],16),{r:t[0],g:t[1],b:t[2]}}(M()))}function R(e){if("color-swap"!==x()||!a)return;r.fillStyle=M();const t=e.offsetX/i(),o=e.offsetY/i(),c=r.getImageData(t,o,1,1).data.join(",");for(let e=0;e<n.width;e+=1)for(let t=0;t<n.width;t+=1)r.getImageData(e,t,1,1).data.join(",")===c&&r.fillRect(e,t,1,1)}function q(e){if("eraser"!==x()||!a)return;const t=document.querySelector(".active").getContext("2d"),o=Math.floor(e.offsetX/i()),n=Math.floor(e.offsetY/i());r.clearRect(o,n,1,1),t.clearRect(o,n,1,1)}function Y(e){if("stroke"!==x()||!a)return;r.putImageData(c,0,0);const t=Math.floor(e.offsetX/i()),o=Math.floor(e.offsetY/i());!function(e,t,o,n){r.fillStyle=M();const a=Math.abs(o-e),i=Math.abs(n-t),c=e<o?1:-1,l=t<n?1:-1;let s=a-i;for(r.fillRect(o,n,1,1);e!==o||t!==n;){r.fillRect(e,t,1,1);const o=2*s;o>-i&&(s-=i,e+=c),o<a&&(s+=a,t+=l)}}(l.x,l.y,t,o)}function X(e,t,o,n){r.fillRect(o+e,n+t,1,1),r.fillRect(o-e,n+t,1,1),r.fillRect(o+e,n-t,1,1),r.fillRect(o-e,n-t,1,1)}function $(e,t,o,n){let r=0,a=n;const i=o*o,c=n*n;let l=0,s=2*i*a;X(r,a,e,t);let f=c-i*n+.25*i;for(;l<s;)l+=2*c,f<0?f=f+c+l:(a--,f=f+c+l-(s-=2*i)),X(++r,a,e,t);const d=r+.5,u=a-1;for(f=c*(d*d)+i*(u*u)-i*c;a>0;)s-=2*i,f>0?f=f+i-s:(r++,f=f+i-s+(l+=2*c)),X(r,--a,e,t)}function k(e){const t=Math.floor(e.offsetX/i()),o=Math.floor(e.offsetY/i());if("circle"!==x()||!a)return;r.putImageData(c,0,0),r.fillStyle=M();const n={};n.x=Math.floor(e.offsetX/i()),n.y=Math.floor(e.offsetY/i());const s=Math.floor(Math.abs(n.x-l.x)/2),f=Math.floor(Math.abs(n.y-l.y)/2);l.x<n.x&&l.y<n.y?$(t-s,o-f,s,f):l.x>n.x&&l.y>n.y?$(l.x-s,l.y-f,s,f):l.x<n.x&&l.y>n.y?$(t-s,l.y-f,s,f):l.x>n.x&&l.y<n.y&&$(l.x-s,o-f,s,f)}function C(e){if("color-picker"!==x()||!a)return;const t=Math.floor(e.offsetX/i()),o=Math.floor(e.offsetY/i()),n=r.getImageData(t,o,1,1),{data:c}=n;if(0===c[3])return;let l=c[0].toString(16);l=1===l.length?`0${l}`:l;let s=c[1].toString(16);s=1===s.length?`0${s}`:s;let f=c[2].toString(16);f=1===f.length?`0${f}`:f,g.value=`#${l}${s}${f}`}function B(e,t,o){e/=255,t/=255,o/=255;const n=Math.max(e,t,o),r=Math.min(e,t,o);let a,i;const c=(n+r)/2;if(n===r)a=0,i=0;else{const l=n-r;switch(i=c>.5?l/(2-n-r):l/(n+r),n){case e:a=(t-o)/l+(t<o?6:0);break;case t:a=(o-e)/l+2;break;case o:a=(e-t)/l+4}a/=6}return[360*a,100*i,100*c]}function D(e){if("lighten"!==x()||!a)return;const t=Math.floor(e.offsetX/i()),o=Math.floor(e.offsetY/i());for(let n=t;n<t+1;n++)for(let t=o;t<o+1;t++){const o=r.getImageData(n,t,1,1),{data:a}=o;if(0===a[3])return;let[i,c,l]=B(a[0],a[1],a[2]);e.ctrlKey?r.fillStyle=`hsl(${i}, ${c}%, ${l>6?l-=5:1}%)`:r.fillStyle=`hsl(${i}, ${c}%, ${l<94?l+=5:99}%)`,r.fillRect(n,t,1,1)}}function j(e){if("dithering"!==x()||!a)return;const t=Math.floor(e.offsetX/i()),o=Math.floor(e.offsetY/i());for(let e=t;e<t+1;e+=1)for(let t=o;t<o+1;t+=1)e%2!=t%2?(r.fillStyle=M(),r.fillRect(e,t,1,1)):r.clearRect(e,t,1,1)}v.forEach(e=>e.addEventListener("click",E)),y.addEventListener("click",function(){const e=g.value;g.value=p.value,p.value=e}),n.addEventListener("mouseup",function(){document.querySelectorAll(".item-frame").forEach(e=>{e.classList.contains("active-item")&&e.querySelector(".canvas-frame").getContext("2d").drawImage(n,0,0)})}),n.addEventListener("mousemove",e=>{const{target:t}=e,o=document.getElementById("position"),r=Math.floor(e.offsetX/i()),a=Math.floor(e.offsetY/i());t.classList.contains("drawing-canvas")&&(o.style.visibility="visible",o.textContent=`${r}:${a}`),n.onmouseout=()=>{o.style.visibility="hidden"}});const O=document.getElementById("animation-frame"),T=document.getElementById("open-animation"),A=document.getElementById("input-range-fps");A.addEventListener("input",function(){document.getElementById("fps-value").innerText=A.value}),T.addEventListener("click",()=>{O.requestFullscreen()});let P,_=0;function z(){const e=1e3/A.value,t=document.querySelectorAll(".canvas-frame"),o=O.getContext("2d");o.clearRect(0,0,128,128),o.drawImage(t[_=++_%t.length],0,0),P&&clearInterval(P),P=setTimeout(z,e)}function F(e){if("rectangle"!==x()||!a)return;r.putImageData(c,0,0),r.strokeStyle=M();const t=Math.floor(e.offsetX/i()),o=Math.floor(e.offsetY/i()),n=t-l.x,s=o-l.y;r.strokeRect(l.x-.5,l.y-.5,n,s)}function H(e){if("move"!==x()||!a)return;r.putImageData(c,0,0);const t={};t.x=Math.floor(e.offsetX/i()),t.y=Math.floor(e.offsetY/i()),r.clearRect(0,0,n.width,n.height);const o=document.querySelector(".active");o.getContext("2d").clearRect(0,0,o.width,o.height),r.putImageData(c,t.x-l.x,t.y-l.y)}s.addEventListener("mouseover",m),s.addEventListener("click",u),n.addEventListener("mousemove",L),n.addEventListener("mousemove",w),n.addEventListener("mousedown",N),n.addEventListener("mousedown",R),n.addEventListener("mousemove",q),n.addEventListener("mousemove",Y),n.addEventListener("mousemove",k),n.addEventListener("mousedown",C),n.addEventListener("mousemove",D),n.addEventListener("mousemove",j),n.addEventListener("mouseup",z),n.addEventListener("mousemove",F),n.addEventListener("mousemove",H)}]);
//# sourceMappingURL=app.bundle.js.map