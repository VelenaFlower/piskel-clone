!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);const n=document.getElementById("drawing-canvas"),r=n.getContext("2d");let a=!1;function l(){return n.offsetWidth/n.width}let i=n;const c={};n.addEventListener("mousedown",e=>{i=r.getImageData(0,0,n.width,n.height),c.x=Math.floor(e.offsetX/l()),c.y=Math.floor(e.offsetY/l()),a=!0}),n.addEventListener("mouseup",()=>{a=!1});const f=document.getElementById("frames");function s(){document.querySelectorAll(".item-frame").forEach((e,t)=>{e.querySelector(".number-frame").innerText=t+1})}function d(){Array.from(f.children).forEach(e=>e.classList.remove("active-item")),document.querySelector(".active").classList.remove("active")}function u(e){const{target:t}=e;if("delete-frame"===t.id&&f.children.length>1&&("item-frame active-item"===t.parentNode.parentNode.className&&(f.children[1].classList.add("active-item"),f.children[1].children[0].children[0].classList.add("active"),r.clearRect(0,0,n.width,n.height),r.drawImage(f.children[1].children[0].children[0],0,0)),t.parentNode.parentNode.remove(),s()),"copy-frame"===t.id){const e=t.parentNode.parentNode.cloneNode(!0),o=t.parentNode.querySelector("canvas");e.querySelector("canvas").getContext("2d").drawImage(o,0,0),t.parentNode.parentNode.classList.remove("active-item"),t.parentNode.children[0].classList.remove("active"),f.insertBefore(e,t.parentNode.parentNode),s()}"item-frame"===t.parentNode.className&&(d(),t.parentNode.classList.toggle("active-item"),t.parentNode.children[0].children[0].classList.toggle("active"),r.clearRect(0,0,n.width,n.height),r.drawImage(t.parentNode.children[0].children[0],0,0))}function m(e){if(!e.target.classList.contains("tile-overlay-move"))return;const t=e.target.parentNode;e.target.onmousedown=function(){t.style.position="absolute",t.style.zIndex=100,t.parentNode.classList.add("preview-container-active"),document.onmousemove=function(e){var o;o=e,t.style.top=`${o.pageY-t.offsetHeight/2-t.parentNode.offsetTop}px`,t.style.left="-3px"}},t.onmouseup=function(){document.querySelectorAll(".item-frame").forEach(e=>{const o=t.offsetTop+t.parentNode.offsetTop,n=e.offsetTop;if(o>n-45&&o<n+45){const o=e,n=e.firstElementChild,r=t.parentNode,a=t;t.style.top="0px",t.style.left="0px",o.appendChild(a),r.appendChild(n),r.classList.remove("preview-container-active")}else t.parentNode.appendChild(t),t.parentNode.classList.remove("preview-container-active")}),t.style.zIndex=1,document.onmousemove=null,t.onmouseup=null,s()}}document.getElementById("btn-add-frame").addEventListener("click",()=>{document.getElementsByClassName("item-frame").length;!function(){d();const e=f.querySelector(".item-frame").cloneNode(!0);e.classList.toggle("active-item"),e.children[0].children[0].classList.toggle("active"),f.appendChild(e),r.clearRect(0,0,n.width,n.height),s()}()});const h=document.getElementById("animation-frame"),y=document.getElementsByName("resize"),v=document.getElementById("primary-color"),p=document.getElementById("secondary-color"),g=document.querySelector(".prev-color"),x=document.querySelector(".swap-color");function E(){const e=document.querySelectorAll(".canvas-frame");let t;y.forEach(o=>{o.checked&&(t=o.value),n.width=t,n.height=t,h.width=t,h.height=t,e.forEach(e=>{e.width=t,e.height=t})})}function w(){let e;return document.getElementsByName("tool").forEach(t=>{t.checked&&(e=t.value)}),e}function L(){return v.value}function M(){return p.value}function S(e){if("pen"===w()&&a&&a){const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l());r.fillStyle=L(),r.fillRect(t,o,1,1),3===e.which&&(r.fillStyle=M(),r.fillRect(t,o,1,1))}}function I(e){if("mirror"!==w()||!a)return;r.fillStyle=L();const t=Math.floor(e.offsetX/l()),o=Math.abs(n.width-t-1),i=Math.floor(e.offsetY/l());r.fillRect(t,i,1,1),r.fillRect(o,i,1,1),3===e.which&&(r.fillStyle=M(),r.fillRect(t,i,1,1),r.fillRect(o,i,1,1))}function b(e,t){return 4*(t*n.width+e)}function N(e,t,o){return e[t]===o.r&&e[t+1]===o.g&&e[t+2]===o.b&&e[t+3]===o.a}function R(e,t,o){e[t]=o.r||0,e[t+1]=o.g||0,e[t+2]=o.b||0,e[t+3]=Object.prototype.hasOwnProperty.call(o,"a")?o.a:255}function k(e){if("bucket"!==w())return;!function(e,t,o){const a=r.getImageData(0,0,n.width,n.height),l=a.data,i=b(e,t),c={r:l[i],g:l[i+1],b:l[i+2],a:l[i+3]},f=[[e,t]];for(;f.length;){const e=f.pop(),t=e[0];let r=e[1],a=b(t,r);for(;r-- >=0&&N(l,a,c);)a-=4*n.width;a+=4*n.width,r+=1;let i=!1,s=!1;for(;r++<n.height-1&&N(l,a,c);)R(l,a,o),t>0&&(N(l,a-4,c)?i||(f.push([t-1,r]),i=!0):i&&(i=!1)),t<n.width-1&&(N(l,a+4,c)?s||(f.push([t+1,r]),s=!0):s&&(s=!1)),a+=4*n.width}r.putImageData(a,0,0)}(Math.floor(e.offsetX/l()),Math.floor(e.offsetY/l()),function(e){const t=e.slice(1).match(/.{2}/g);return t[0]=parseInt(t[0],16),t[1]=parseInt(t[1],16),t[2]=parseInt(t[2],16),{r:t[0],g:t[1],b:t[2]}}(L()))}function q(e){if("color-swap"!==w()||!a)return;r.fillStyle=L();const t=e.offsetX/l(),o=e.offsetY/l(),i=r.getImageData(t,o,1,1).data.join(",");for(let e=0;e<n.width;e+=1)for(let t=0;t<n.width;t+=1)r.getImageData(e,t,1,1).data.join(",")===i&&r.fillRect(e,t,1,1)}function Y(e){if("eraser"!==w()||!a)return;const t=document.querySelector(".active").getContext("2d"),o=Math.floor(e.offsetX/l()),n=Math.floor(e.offsetY/l());r.clearRect(o,n,1,1),t.clearRect(o,n,1,1)}function B(e,t,o,n){const a=Math.abs(o-e),l=Math.abs(n-t),i=e<o?1:-1,c=t<n?1:-1;let f=a-l;for(r.fillRect(o,n,1,1);e!==o||t!==n;){r.fillRect(e,t,1,1);const o=2*f;o>-l&&(f-=l,e+=i),o<a&&(f+=a,t+=c)}}function X(e){if("stroke"!==w()||!a)return;r.putImageData(i,0,0),r.fillStyle=L();const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l());B(c.x,c.y,t,o),3===e.which&&(r.fillStyle=M(),B(c.x,c.y,t,o))}function $(e,t,o,n){r.fillRect(o+e,n+t,1,1),r.fillRect(o-e,n+t,1,1),r.fillRect(o+e,n-t,1,1),r.fillRect(o-e,n-t,1,1)}function C(e,t,o,n){let r=0,a=n;const l=o*o,i=n*n;let c=0,f=2*l*a;$(r,a,e,t);let s=i-l*n+.25*l;for(;c<f;)c+=2*i,s<0?s=s+i+c:(a--,s=s+i+c-(f-=2*l)),$(++r,a,e,t);const d=r+.5,u=a-1;for(s=i*(d*d)+l*(u*u)-l*i;a>0;)f-=2*l,s>0?s=s+l-f:(r++,s=s+l-f+(c+=2*i)),$(r,--a,e,t)}function D(e){const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l());if("circle"!==w()||!a)return;r.putImageData(i,0,0),r.fillStyle=L();const n={};n.x=Math.floor(e.offsetX/l()),n.y=Math.floor(e.offsetY/l());const f=Math.floor(Math.abs(n.x-c.x)/2),s=Math.floor(Math.abs(n.y-c.y)/2);c.x<n.x&&c.y<n.y?C(t-f,o-s,f,s):c.x>n.x&&c.y>n.y?C(c.x-f,c.y-s,f,s):c.x<n.x&&c.y>n.y?C(t-f,c.y-s,f,s):c.x>n.x&&c.y<n.y&&C(c.x-f,o-s,f,s),3===e.which&&(r.fillStyle=M(),c.x<n.x&&c.y<n.y?C(t-f,o-s,f,s):c.x>n.x&&c.y>n.y?C(c.x-f,c.y-s,f,s):c.x<n.x&&c.y>n.y?C(t-f,c.y-s,f,s):c.x>n.x&&c.y<n.y&&C(c.x-f,o-s,f,s))}function j(e){if("color-picker"!==w()||!a)return;const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l()),n=r.getImageData(t,o,1,1),{data:i}=n;if(0===i[3])return;let c=i[0].toString(16);c=1===c.length?`0${c}`:c;let f=i[1].toString(16);f=1===f.length?`0${f}`:f;let s=i[2].toString(16);s=1===s.length?`0${s}`:s,v.value=`#${c}${f}${s}`}function O(e,t,o){e/=255,t/=255,o/=255;const n=Math.max(e,t,o),r=Math.min(e,t,o);let a,l;const i=(n+r)/2;if(n===r)a=0,l=0;else{const c=n-r;switch(l=i>.5?c/(2-n-r):c/(n+r),n){case e:a=(t-o)/c+(t<o?6:0);break;case t:a=(o-e)/c+2;break;case o:a=(e-t)/c+4}a/=6}return[360*a,100*l,100*i]}function T(e){if("lighten"!==w()||!a)return;const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l());for(let n=t;n<t+1;n++)for(let t=o;t<o+1;t++){const o=r.getImageData(n,t,1,1),{data:a}=o;if(0===a[3])return;let[l,i,c]=O(a[0],a[1],a[2]);e.ctrlKey?r.fillStyle=`hsl(${l}, ${i}%, ${c>6?c-=5:1}%)`:r.fillStyle=`hsl(${l}, ${i}%, ${c<94?c+=5:99}%)`,r.fillRect(n,t,1,1)}}function A(e){if("dithering"!==w()||!a)return;const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l());for(let e=t;e<t+1;e+=1)for(let t=o;t<o+1;t+=1)e%2!=t%2?(r.fillStyle=L(),r.fillRect(e,t,1,1)):(r.fillStyle=M(),r.fillRect(e,t,1,1))}y.forEach(e=>e.addEventListener("click",E)),x.addEventListener("click",function(){const e=v.value;v.value=g.value,g.value=e}),n.addEventListener("mouseup",function(){document.querySelectorAll(".item-frame").forEach(e=>{e.classList.contains("active-item")&&e.querySelector(".canvas-frame").getContext("2d").drawImage(n,0,0)})}),n.addEventListener("mousemove",e=>{const{target:t}=e,o=document.getElementById("position"),r=Math.floor(e.offsetX/l()),a=Math.floor(e.offsetY/l());t.classList.contains("drawing-canvas")&&(o.style.visibility="visible",o.textContent=`${r}:${a}`),n.onmouseout=()=>{o.style.visibility="hidden"}});const P=document.getElementById("animation-frame"),_=document.getElementById("open-animation"),z=document.getElementById("input-range-fps");z.addEventListener("input",function(){document.getElementById("fps-value").innerText=z.value}),_.addEventListener("click",()=>{P.requestFullscreen()});let F,H=0;function K(){const e=1e3/z.value,t=document.querySelectorAll(".canvas-frame"),o=P.getContext("2d");o.clearRect(0,0,128,128),o.drawImage(t[H=++H%t.length],0,0),F&&clearInterval(F),F=setTimeout(K,e)}function W(e){if("rectangle"!==w()||!a)return;r.putImageData(i,0,0),r.strokeStyle=L();const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l()),n=t-c.x,f=o-c.y;r.strokeRect(c.x-.5,c.y-.5,n,f),3===e.which&&(r.strokeStyle=M(),r.strokeRect(c.x-.5,c.y-.5,n,f))}function G(e){if("move"!==w()||!a)return;r.putImageData(i,0,0);const t={};t.x=Math.floor(e.offsetX/l()),t.y=Math.floor(e.offsetY/l()),r.clearRect(0,0,n.width,n.height);const o=document.querySelector(".active");o.getContext("2d").clearRect(0,0,o.width,o.height),r.putImageData(i,t.x-c.x,t.y-c.y)}f.addEventListener("mouseover",m),f.addEventListener("click",u),n.addEventListener("contextmenu",e=>{e.preventDefault()},!1),n.addEventListener("mousemove",S),n.addEventListener("mousemove",I),n.addEventListener("mousedown",k),n.addEventListener("mousedown",q),n.addEventListener("mousemove",Y),n.addEventListener("mousemove",X),n.addEventListener("mousemove",D),n.addEventListener("mousedown",j),n.addEventListener("mousemove",T),n.addEventListener("mousemove",A),n.addEventListener("mouseup",K),n.addEventListener("mousemove",W),n.addEventListener("mousemove",G)}]);
//# sourceMappingURL=app.bundle.js.map