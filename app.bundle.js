!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);const n=document.getElementById("drawing-canvas"),r=n.getContext("2d");let a=!1;function l(){return n.offsetWidth/n.width}let c=n;const i={};n.addEventListener("mousedown",e=>{c=r.getImageData(0,0,n.width,n.height),i.x=Math.floor(e.offsetX/l()),i.y=Math.floor(e.offsetY/l()),a=!0}),n.addEventListener("mouseup",()=>{a=!1});const f=document.getElementById("frames");function s(){document.querySelectorAll(".item-frame").forEach((e,t)=>{e.querySelector(".number-frame").innerText=t+1})}function u(){Array.from(f.children).forEach(e=>e.classList.remove("active-item")),document.querySelector(".active").classList.remove("active")}function d(e){const{target:t}=e;if("delete-frame"===t.id){if("item-frame active-item"===t.parentNode.parentNode.className){document.querySelector(".item-frame").classList.toggle("active-item");const e=document.querySelector(".canvas-frame");e.classList.toggle("active"),r.clearRect(0,0,n.width,n.height),r.drawImage(e,0,0)}t.parentNode.parentNode.remove(),s()}if("copy-frame"===t.id){const e=t.parentNode.parentNode.cloneNode(!0),o=t.parentNode.querySelector("canvas");e.querySelector("canvas").getContext("2d").drawImage(o,0,0),f.insertBefore(e,f.lastChild),t.parentNode.parentNode.classList.remove("active-item"),t.parentNode.children[0].classList.remove("active"),s()}"item-frame"===t.parentNode.className&&(u(),t.parentNode.classList.toggle("active-item"),t.parentNode.children[0].children[0].classList.toggle("active"),r.clearRect(0,0,n.width,n.height),r.drawImage(t.parentNode.children[0].children[0],0,0))}function m(e){if(!e.target.classList.contains("tile-overlay-move"))return;const t=e.target.parentNode;e.target.onmousedown=function(){t.style.position="absolute",t.style.zIndex=100,t.parentNode.classList.add("preview-container-active"),document.onmousemove=function(e){var o;o=e,t.style.top=`${o.pageY-t.offsetHeight/2-t.parentNode.offsetTop}px`,t.style.left="-3px"}},t.onmouseup=function(){document.querySelectorAll(".item-frame").forEach(e=>{const o=t.offsetTop+t.parentNode.offsetTop,n=e.offsetTop;if(o>n-45&&o<n+45){const o=e,n=e.firstElementChild,r=t.parentNode,a=t;t.style.top="0px",t.style.left="0px",o.appendChild(a),r.appendChild(n),r.classList.remove("preview-container-active")}else t.parentNode.appendChild(t),t.parentNode.classList.remove("preview-container-active")}),t.style.zIndex=1,document.onmousemove=null,t.onmouseup=null,s()}}document.getElementById("btn-add-frame").addEventListener("click",()=>{document.getElementsByClassName("item-frame").length;!function(){u();const e=f.querySelector(".item-frame").cloneNode(!0);e.classList.toggle("active-item"),e.children[0].children[0].classList.toggle("active"),f.appendChild(e),r.clearRect(0,0,n.width,n.height),s()}()});const h=document.getElementById("animation-frame"),v=document.getElementsByName("resize"),p=document.querySelector(".active-color"),g=document.querySelector(".prev-color"),y=document.querySelector(".swap-color");function E(){const e=document.querySelectorAll(".canvas-frame");let t;v.forEach(o=>{o.checked&&(t=o.value),n.width=t,n.height=t,h.width=t,h.height=t,e.forEach(e=>{e.width=t,e.height=t})})}function M(){let e;return document.getElementsByName("tool").forEach(t=>{t.checked&&(e=t.value)}),e}function L(){return p.value}function w(e){if("pen"===M()&&a&&a){r.fillStyle=L();const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l());r.fillRect(t,o,1,1)}}function x(e){if("mirror"!==M()||!a)return;r.fillStyle=L();const t=Math.floor(e.offsetX/l()),o=Math.abs(n.width-t-1),c=Math.floor(e.offsetY/l());r.fillRect(t,c,1,1),r.fillRect(o,c,1,1)}function S(e,t){return 4*(t*n.width+e)}function b(e,t,o){return e[t]===o.r&&e[t+1]===o.g&&e[t+2]===o.b&&e[t+3]===o.a}function I(e,t,o){e[t]=o.r||0,e[t+1]=o.g||0,e[t+2]=o.b||0,e[t+3]=Object.prototype.hasOwnProperty.call(o,"a")?o.a:255}function N(e){if("bucket"!==M())return;!function(e,t,o){const a=r.getImageData(0,0,n.width,n.height),l=a.data,c=S(e,t),i={r:l[c],g:l[c+1],b:l[c+2],a:l[c+3]},f=[[e,t]];for(;f.length;){const e=f.pop(),t=e[0];let r=e[1],a=S(t,r);for(;r-- >=0&&b(l,a,i);)a-=4*n.width;a+=4*n.width,r+=1;let c=!1,s=!1;for(;r++<n.height-1&&b(l,a,i);)I(l,a,o),t>0&&(b(l,a-4,i)?c||(f.push([t-1,r]),c=!0):c&&(c=!1)),t<n.width-1&&(b(l,a+4,i)?s||(f.push([t+1,r]),s=!0):s&&(s=!1)),a+=4*n.width}r.putImageData(a,0,0)}(Math.floor(e.offsetX/l()),Math.floor(e.offsetY/l()),function(e){const t=e.slice(1).match(/.{2}/g);return t[0]=parseInt(t[0],16),t[1]=parseInt(t[1],16),t[2]=parseInt(t[2],16),{r:t[0],g:t[1],b:t[2]}}(L()))}function R(e){if("color-swap"!==M()||!a)return;r.fillStyle=L();const t=e.offsetX/l(),o=e.offsetY/l(),c=r.getImageData(t,o,1,1).data.join(",");for(let e=0;e<n.width;e+=1)for(let t=0;t<n.width;t+=1)r.getImageData(e,t,1,1).data.join(",")===c&&r.fillRect(e,t,1,1)}function q(e){if("eraser"!==M()||!a)return;const t=document.querySelector(".active").getContext("2d"),o=Math.floor(e.offsetX/l()),n=Math.floor(e.offsetY/l());r.clearRect(o,n,1,1),t.clearRect(o,n,1,1)}function Y(e){if("stroke"!==M()||!a)return;r.putImageData(c,0,0);const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l());!function(e,t,o,n){r.fillStyle=L();const a=Math.abs(o-e),l=Math.abs(n-t),c=e<o?1:-1,i=t<n?1:-1;let f=a-l;for(r.fillRect(o,n,1,1);e!==o||t!==n;){r.fillRect(e,t,1,1);const o=2*f;o>-l&&(f-=l,e+=c),o<a&&(f+=a,t+=i)}}(i.x,i.y,t,o)}function k(e,t,o,n){r.fillRect(o+e,n+t,1,1),r.fillRect(o-e,n+t,1,1),r.fillRect(o+e,n-t,1,1),r.fillRect(o-e,n-t,1,1)}function X(e,t,o,n){let r=0,a=n;const l=o*o,c=n*n;let i=0,f=2*l*a;k(r,a,e,t);let s=c-l*n+.25*l;for(;i<f;)i+=2*c,s<0?s=s+c+i:(a--,s=s+c+i-(f-=2*l)),k(++r,a,e,t);const u=r+.5,d=a-1;for(s=c*(u*u)+l*(d*d)-l*c;a>0;)f-=2*l,s>0?s=s+l-f:(r++,s=s+l-f+(i+=2*c)),k(r,--a,e,t)}function $(e){const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l());if("circle"!==M()||!a)return;r.putImageData(c,0,0),r.fillStyle=L();const n={};n.x=Math.floor(e.offsetX/l()),n.y=Math.floor(e.offsetY/l());const f=Math.floor(Math.abs(n.x-i.x)/2),s=Math.floor(Math.abs(n.y-i.y)/2);i.x<n.x&&i.y<n.y?X(t-f,o-s,f,s):i.x>n.x&&i.y>n.y?X(i.x-f,i.y-s,f,s):i.x<n.x&&i.y>n.y?X(t-f,i.y-s,f,s):i.x>n.x&&i.y<n.y&&X(i.x-f,o-s,f,s)}function B(e){if("color-picker"!==M()||!a)return;const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l()),n=r.getImageData(t,o,1,1),{data:c}=n;if(0===c[3])return;let i=c[0].toString(16);i=1===i.length?`0${i}`:i;let f=c[1].toString(16);f=1===f.length?`0${f}`:f;let s=c[2].toString(16);s=1===s.length?`0${s}`:s,p.value=`#${i}${f}${s}`}function C(e,t,o){e/=255,t/=255,o/=255;const n=Math.max(e,t,o),r=Math.min(e,t,o);let a,l;const c=(n+r)/2;if(n===r)a=0,l=0;else{const i=n-r;switch(l=c>.5?i/(2-n-r):i/(n+r),n){case e:a=(t-o)/i+(t<o?6:0);break;case t:a=(o-e)/i+2;break;case o:a=(e-t)/i+4}a/=6}return[360*a,100*l,100*c]}function j(e){if("lighten"!==M()||!a)return;const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l());for(let n=t;n<t+1;n++)for(let t=o;t<o+1;t++){const o=r.getImageData(n,t,1,1),{data:a}=o;if(0===a[3])return;let[l,c,i]=C(a[0],a[1],a[2]);e.ctrlKey?r.fillStyle=`hsl(${l}, ${c}%, ${i>6?i-=5:1}%)`:r.fillStyle=`hsl(${l}, ${c}%, ${i<94?i+=5:99}%)`,r.fillRect(n,t,1,1)}}function D(e){if("dithering"!==M()||!a)return;const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l());for(let e=t;e<t+1;e+=1)for(let t=o;t<o+1;t+=1)e%2!=t%2?(r.fillStyle=L(),r.fillRect(e,t,1,1)):r.clearRect(e,t,1,1)}v.forEach(e=>e.addEventListener("click",E)),y.addEventListener("click",function(){const e=p.value;p.value=g.value,g.value=e}),n.addEventListener("mouseup",function(){document.querySelectorAll(".item-frame").forEach(e=>{e.classList.contains("active-item")&&e.querySelector(".canvas-frame").getContext("2d").drawImage(n,0,0)})});const O=document.getElementById("animation-frame"),T=document.getElementById("open-animation"),A=document.getElementById("input-range-fps");A.addEventListener("input",function(){document.getElementById("fps-value").innerText=A.value}),T.addEventListener("click",()=>{O.requestFullscreen()});let P,_=0;function z(){const e=1e3/A.value,t=document.querySelectorAll(".canvas-frame"),o=O.getContext("2d");o.clearRect(0,0,128,128),o.drawImage(t[_=++_%t.length],0,0),P&&clearInterval(P),P=setTimeout(z,e)}function F(e){const t=Math.floor(e.offsetX/l()),o=Math.floor(e.offsetY/l());"rectangle"===M()&&a&&(r.putImageData(c,0,0),r.strokeStyle=L(),i.x=Math.floor(e.offsetX/l()),i.y=Math.floor(e.offsetY/l()),r.strokeRect(t-.5,o-.5,i.x,i.y))}f.addEventListener("mouseover",m),f.addEventListener("click",d),n.addEventListener("mousemove",w),n.addEventListener("mousemove",x),n.addEventListener("mousedown",N),n.addEventListener("mousedown",R),n.addEventListener("mousemove",q),n.addEventListener("mousemove",Y),n.addEventListener("mousemove",$),n.addEventListener("mousedown",B),n.addEventListener("mousemove",j),n.addEventListener("mousemove",D),n.addEventListener("mouseup",z),n.addEventListener("mousemove",F)}]);
//# sourceMappingURL=app.bundle.js.map